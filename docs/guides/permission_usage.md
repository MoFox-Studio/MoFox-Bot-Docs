# 指令权限系统使用指南

## 什么是权限系统？

机器人拥有一个强大的权限系统，可以精细地控制谁可以使用哪些功能。这确保了机器人不会被滥用，并且只有授权用户才能执行敏感操作。

权限系统的核心是 **权限节点**。每个插件或功能都可以定义自己的权限节点，你可以把它们想象成一把把不同的“钥匙”。拥有某把“钥匙”（即被授予了某个权限节点）的用户，就可以使用对应的功能。

## 如何使用权限管理指令？

你可以通过 `/permission` 指令来管理权限。这是一个功能强大的指令，可以让你授予、撤销和查询权限。

**注意：** 使用这些指令本身也需要权限。通常，只有机器人的管理员才能管理权限。

### 1. 授予权限

如果你想让某个用户使用特定功能，你可以授予他们相应的权限节点。

**指令格式：**
`/permission grant <@用户或用户ID> <权限节点>`

**示例：**
-   想让用户“小明”拥有使用“音乐插件”播放音乐的权限：
    `/permission grant @小明 plugin.music.play`

-   如果你知道用户的 QQ 号是 `123456789`，也可以直接使用 ID：
    `/permission grant 123456789 plugin.music.play`

### 2. 撤销权限

如果你不希望某个用户再使用某个功能，可以撤销他们的权限。

**指令格式：**
`/permission revoke <@用户或用户ID> <权限节点>`

**示例：**
-   撤销用户“小明”播放音乐的权限：
    `/permission revoke @小明 plugin.music.play`

-   使用用户 ID 撤销：
    `/permission revoke 123456789 plugin.music.play`

### 3. 查看权限

你可以查看自己或他人拥有的所有权限。

**指令格式：**
`/permission list [@用户或用户ID]`

**示例：**
-   查看自己的权限：
    `/permission list`

-   查看用户“小明”的权限：
    `/permission list @小明`

-   使用用户 ID 查看：
    `/permission list 123456789`

### 4. 检查特定权限

你可以检查某个用户是否拥有某个特定的权限节点。

**指令格式：**
`/permission check <@用户或用户ID> <权限节点>`

**示例：**
-   检查“小明”是否可以播放音乐：
    `/permission check @小明 plugin.music.play`

### 5. 查看所有可用的权限节点

想知道机器人里到底有多少种“钥匙”（权限节点）吗？你可以使用这个指令查看。

**指令格式：**
`/permission nodes [插件名]`

**示例：**
-   查看所有插件定义的所有权限节点：
    `/permission nodes`

-   只看“音乐插件”有哪些权限节点：
    `/permission nodes music`

### 6. 获取帮助

如果你忘记了指令的用法，可以随时寻求帮助。

**指令格式：**
`/permission help`

## 什么是 Master 用户？

在配置文件中，可以设置一个或多个“Master 用户”。这是机器人的最高管理员，拥有所有权限，可以执行任何操作，不受权限系统的任何限制。这个设置是为了确保总有人能管理机器人。

## 常见问题

**Q: 我输入了指令，但机器人提示我“权限不足”，怎么办？**
A: 这意味着你没有执行该操作所需的“钥匙”（权限节点）。你需要联系机器人的管理员，让他使用 `/permission grant` 指令授予你相应的权限。

**Q: 我是管理员，该如何找到我需要的权限节点名称？**
A: 你可以使用 `/permission nodes` 指令来查看所有可用的权限节点及其描述。通常，权限节点的名称都很有规律，例如 `plugin.插件名.功能名`。

**Q: 我不小心给错了权限怎么办？**
A: 不用担心，立即使用 `/permission revoke` 指令将错误的权限撤销即可。